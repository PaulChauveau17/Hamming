# optimization level: 3
CFLAGS = -std=c11 -Wall -Wextra -g -O3
CPPFLAGS = -I../include -DDEBUG
LDFLAGS =
EXE_ARGS = -v

all: hamming_code

run: hamming_code
	@cd ../bin && ./$(EXE) $(EXE_ARGS)

hamming_code: hamming_code.o
	$(CC) $(CFLAGS) -o ../bin/$@ $^ $(LDFLAGS)

hamming_code.o: hamming_code.c hamming_code.h
	$(CC) $(CFLAGS) $(CPPFLAGS) -c $<

format:
	@clang-format -i *.c *.h

clean:
	@rm -f *.o

help:
	@echo "Usage:"
	@echo -e " make [all]\t\tBuild the software"
	@echo -e " make run\t\tBuild and run the software"
	@echo -e " make format\t\tRun formatter on sources"
	@echo -e " make clean\t\tRemove all files generated by make"
	@echo -e " make help\t\tDisplay this help"

.PHONY: all format clean help